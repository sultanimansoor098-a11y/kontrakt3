<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bettingavtal</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f9f9f9;
      color: #333;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      background: #fff;
      width: 100%;
      max-width: 600px;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    h2 {
      text-align: center;
      color: #0078d7;
      font-size: 22px;
      margin-bottom: 20px;
    }

    label {
      font-weight: bold;
      display: block;
      margin-top: 15px;
      font-size: 15px;
    }

    input, textarea {
      width: 100%;
      padding: 10px;
      margin-top: 6px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 15px;
      box-sizing: border-box;
    }

    button {
      width: 100%;
      background-color: #0078d7;
      color: white;
      border: none;
      padding: 12px;
      border-radius: 6px;
      margin-top: 20px;
      cursor: pointer;
      font-size: 16px;
      transition: background 0.3s;
    }

    button:hover {
      background-color: #005fa3;
    }

    /* Mobilanpassning */
    @media (max-width: 480px) {
      body {
        padding: 10px;
      }
      .container {
        padding: 20px 15px;
      }
      h2 {
        font-size: 20px;
      }
      label, input, button {
        font-size: 14px;
      }
    }
  </style>
</head>
<body>

  <div class="container">
    <h2>Avtal om Bettingbonus</h2>

    <form id="contractForm" action="https://formspree.io/f/xgvnjldw" method="POST">
      <label>Fullständigt namn:</label>
      <input type="text" name="namn" id="namn" required>

      <label>Telefonnummer:</label>
      <input type="text" name="telefon" id="telefon" required>

      <label>Avtalsbelopp (kr):</label>
      <input type="number" name="summa" id="summa" required>

      <label>Andel av vinst till person (%):</label>
      <input type="number" name="andel" id="andel" required>

      <label>Datum:</label>
      <input type="date" name="datum" id="datum" required>

      <button type="submit">Skicka & skapa PDF</button>
    </form>
  </div>

  <script>
    document.getElementById("contractForm").addEventListener("submit", function(event) {
      event.preventDefault();

      const namn = document.getElementById("namn").value;
      const telefon = document.getElementById("telefon").value;
      const summa = document.getElementById("summa").value;
      const andel = document.getElementById("andel").value;
      const datum = document.getElementById("datum").value;

      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      doc.setFontSize(14);
      doc.text("Avtal om Bettingbonus", 20, 20);
      doc.setFontSize(11);
      doc.text(`Datum: ${datum}`, 20, 30);
      doc.text(`Fullständigt namn: ${namn}`, 20, 40);
      doc.text(`Telefonnummer: ${telefon}`, 20, 50);
      doc.text(`Avtalsbelopp: ${summa} kr`, 20, 60);
      doc.text(`Andel av vinst: ${andel}%`, 20, 70);

      const text = `
Detta avtal gäller mellan ovanstående person och avtalsskaparen.
Jag köper personens bettingbonus och spelar med deras konto.
All vinst och pengar som finns på kontona tillhör mig.
En del av vinsten motsvarande den avtalade andelen (${andel}%) betalas till personen enligt överenskommelsen.
`;

      doc.text(text, 20, 85, { maxWidth: 170, align: "left" });

      doc.text("Godkänd av båda parter.", 20, 145);
      doc.text("__________________________", 20, 155);
      doc.text("Signatur - Avtalsskapare", 20, 162);
      doc.text("__________________________", 120, 155);
      doc.text("Signatur - Person", 120, 162);

      doc.save(`avtal_${namn.replace(/\s+/g, "_")}.pdf`);

      // Skicka till Formspree
      fetch("https://formspree.io/f/xgvnjldw", {
        method: "POST",
        headers: { 'Accept': 'application/json' },
        body: new FormData(event.target)
      }).then(response => {
        if (response.ok) {
          alert("Tack! Ditt avtal har skickats och PDF skapats.");
          event.target.reset();
        } else {
          alert("Något gick fel vid skickning.");
        }
      }).catch(() => alert("Fel vid anslutning."));
    });
  </script>
</body>
</html>
